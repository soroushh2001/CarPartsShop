@using CarPartsShop.Application.ViewModels.Categories
@using CarPartsShop.Application.ViewModels.Products
@model CarPartsShop.Application.ViewModels.Products.FilterProductViewModel
@{
	var categories = ViewBag.Categories as List<CategoryViewModel>;
}
<!-- Filter START -->
<aside class="col-xl-4 col-xxl-3">
	<!-- Responsive offcanvas body START -->
	<div class="offcanvas-xl offcanvas-end" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel">
		<div class="offcanvas-header bg-light">
			<h5 class="offcanvas-title" id="offcanvasSidebarLabel">جستجو پیشرفته</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasSidebar" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body flex-column p-3 p-xl-0">
			<form class="border rounded-2">

				<div class="card card-body">
					<!-- Title -->
					<h6 class="mb-3">دسته بندی ها</h6>
					@if (categories != null && categories.Any())
					{
						<ul>
							@foreach(var item in categories.Where(x=> x.ParentId == null))
							{
								<li>
									<p>@item.Title</p>
									<ul>
										@foreach(var subItem in categories.Where(x=> x.ParentId == item.Id))
										{
											<li>
												<div class="form-check">
													<input onchange="submitPagingForm()"
														@(Model.CategoryUrls != null && Model.CategoryUrls.Contains(subItem.Slug) ? "checked" : "")
														   class="form-check-input" type="checkbox" value="@subItem.Slug" name="CategoryUrls" id="amenitiesType1">
													<label class="form-check-label" for="amenitiesType1">@subItem.Title</label>
												</div>
											</li>
										}
									</ul>
								</li>
							}
						</ul>
					}
					
				</div>
				<!-- Offer type END -->

	
				<div class="card card-body">
					<!-- Title -->
					<h6 class="mb-3">کیفیت</h6>
				
					<select class="form-select-sm" onchange="submitPagingForm()" asp-for="ProductQualityForFilter" asp-items="@Html.GetEnumSelectList<ProductQualityForFilter>()"></select>

				</div>


				<div class="card card-body">
					<!-- Title -->
					<h6 class="mb-3">قیمت</h6>

					<input class="form-control form-control-sm" asp-for="MinPrice" placeholder="از" />
					<input class="form-control form-control-sm" asp-for="MaxPrice" placeholder="تا" />
					<button class="btn btn-primary mb-0" type="submit">نتیجه فیلتر</button>
				</div>
			
			</form><!-- Form End -->
		</div>
	</div>
	<!-- Responsive offcanvas body END -->
</aside>
<!-- Filter END -->