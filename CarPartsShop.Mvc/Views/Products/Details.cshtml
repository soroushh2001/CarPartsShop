@using CarPartsShop.Application.Extensions
@using CarPartsShop.Application.Statics
@using CarPartsShop.Application.ViewModels.Comments
@using CarPartsShop.Application.ViewModels.Products
@using CarPartsShop.Mvc.Helpers
@model ProductViewModel
@{
    ViewData["Title"] = "Details";
}

<section>
	<div class="container">
		<div class="row g-4 g-lg-0 justify-content-between">
			<!-- Image -->
			<div class="col-lg-5">
				<div class="row g-2">
					<div class="col-12">
						<div class="bg-light rounded-2 glightbox-bg p-4 position-relative">
							<a href="assets/images/shop/11.png" class="stretched-link cursor-zoom" data-glightbox="" data-gallery="image-popup">
								<img src="@StaticDetails.ProductOrgImagePath@Model.MainImage" alt="">
							</a>
						</div>
					</div>
@* 					<div class="col-6">
						<div class="bg-light rounded-2 glightbox-bg p-4 position-relative">
							<a href="assets/images/shop/13.png" class="stretched-link cursor-zoom" data-glightbox="" data-gallery="image-popup">
								<img src="assets/images/shop/13.png" alt="">
							</a>
						</div>
					</div>
					<div class="col-6">
						<div class="bg-light rounded-2 glightbox-bg p-4 position-relative">
							<a href="assets/images/shop/14.png" class="stretched-link cursor-zoom" data-glightbox="" data-gallery="image-popup">
								<img src="assets/images/shop/14.png" alt="">
							</a>
						</div>
					</div> *@
				</div>
			</div>

			<!-- Detail -->
			<div class="col-lg-6">
				<!-- Title -->
				<h1>@Model.Title</h1>
				<p class="mb-4">@Html.Raw(Model.ShortDescription)</p>


				<!-- List START -->
				<div class="bg-light p-3 rounded-2 mb-4">
					<div class="row g-2">
						<!-- List -->
						<div class="col-sm-6">
							<ul class="list-group list-group-borderless">
								<li class="list-group-item py-0">
									<span>کیفیت:</span>
									<span class="h6 mb-0">@Model.ProductQuality.GetDisplayName()</span>
								</li>
								<li class="list-group-item pb-0">
									<span>دسته بندی:</span>
									<span class="h6 mb-0">
										@foreach(var item in Model.Categories)
										{
											<a>@item.Title</a>
										}
									</span>
								</li>
							</ul>
						</div>
						<!-- List -->
						<div class="col-sm-6">
							<ul class="list-group list-group-borderless">
								<li class="list-group-item py-0">
									<span>موجود در انبار:</span>
									<span class="h6 mb-0">
										@(Model.IsExisted ? "بله":"خیر");
									</span>
								</li>
								
							</ul>
						</div>
					</div>
				</div>
				<!-- List END -->

				<!-- Price and button START -->
				<div class="row">
					<!-- Price -->
					<div class="col-md-4">
						<h6 class="mb-0">قیمت:</h6>

						<h4 class="@(Model.IsExisted ? "text-success" : "text-danger")">
							@(Model.IsExisted?$"{Model.Price.ToString("#,0")} تومان":"نا موجود")
						</h4>

						
					</div>

					@if (Model.IsExisted)
					{
						<div class="col-md-6">
							<input type="number" id="product-count-input" value="1" class="form-control-sm" />
							<a href="javascript:void(0)" onclick="addToCart('@Model.Id')" class="btn btn-primary mb-0 w-100"><i class="bi bi-cart2 me-2"></i>افزودن به سبد</a>
						</div>
					}

					<!-- Button -->
					
				</div>
				<!-- Price and button END -->
			</div>
		</div>
	</div>
</section>

<section class="pt-0 pt-lg-5">
	<div class="container">
		<div class="row g-4 justify-content-between">
			<!-- Description -->
			<div class="col-lg-12">
				<h5>توضیحات</h5>
				@Html.Raw(Model.Description)
			</div>

		</div>
	</div>
</section>

<section class="pt-0">


	@await Component.InvokeAsync("Comments",Model.Id)
	<partial name="_AddComment" model="new CreateCommentViewModel{ProductId=Model.Id,ProductSlug = Model.Slug}" />

	</section>


@await Component.InvokeAsync("SameProducts",Model.Id)

